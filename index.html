<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SD VIBE PRO</title>
    <style>
        :root { --neon: #39FF14; --bg: #000; --card: #1a1a1a; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; padding-bottom: 120px; }
        .header { background: linear-gradient(180deg, #1db954, #000); padding: 25px; border-radius: 20px; text-align: center; border-bottom: 2px solid var(--neon); margin-bottom: 20px; }
        .search-box { display: flex; gap: 8px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid var(--neon); background: #111; color: #fff; outline: none; }
        .btn { background: var(--neon); color: #000; border: none; padding: 10px 15px; border-radius: 25px; font-weight: bold; cursor: pointer; }
        
        /* Music List */
        .music-card { background: var(--card); padding: 12px; border-radius: 12px; margin-bottom: 10px; display: flex; align-items: center; gap: 12px; border-left: 4px solid var(--neon); }
        .info { flex: 1; overflow: hidden; }
        .song-name { display: block; font-weight: bold; color: var(--neon); font-size: 14px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
        .play-list-btn { background: var(--neon); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; cursor: pointer; flex-shrink: 0; }

        /* Floating Player Bottom */
        .bottom-player { position: fixed; bottom: 0; left: 0; width: 100%; background: #111; border-top: 2px solid var(--neon); padding: 15px; box-sizing: border-box; z-index: 100; }
        .controls { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 10px; }
        .skip-btn { background: none; border: 1px solid var(--neon); color: var(--neon); padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; }
        .main-play-pause { background: var(--neon); color: #000; border: none; width: 45px; height: 45px; border-radius: 50%; font-size: 20px; font-weight: bold; }
        
        .progress-container { display: flex; align-items: center; gap: 10px; width: 100%; }
        input[type="range"] { flex: 1; accent-color: var(--neon); cursor: pointer; }
        .time-label { font-size: 11px; min-width: 35px; }
        
        #hidden-video { display: none; }
    </style>
</head>
<body>

<div class="header">
    <h1 style="margin:0;">ðŸŽ¶ SD VIBE PRO</h1>
    <p style="font-size:12px; opacity:0.8;">Premium Player â€¢ Skip & Seek</p>
</div>

<div class="search-box">
    <input type="text" id="query" placeholder="Gaana ya Singer search karein...">
    <button class="btn" onclick="searchMusic()">Search</button>
</div>

<div id="results"></div>

<div class="bottom-player" id="player-ui" style="display:none;">
    <div style="text-align:center; font-size:12px; margin-bottom:8px; color:var(--neon); white-space:nowrap; overflow:hidden;" id="current-song-title">Song Name</div>
    
    <div class="progress-container">
        <span class="time-label" id="current-time">0:00</span>
        <input type="range" id="seekbar" value="0" step="1">
        <span class="time-label" id="duration">0:00</span>
    </div>

    <div class="controls">
        <button class="skip-btn" onclick="skip(-10)">-10s</button>
        <button class="main-play-pause" id="play-toggle" onclick="togglePlay()">II</button>
        <button class="skip-btn" onclick="skip(10)">+10s</button>
    </div>
</div>

<div id="hidden-video">
    <div id="yt-player"></div>
</div>

<script>
    const API_KEY = 'AIzaSyBUk4Xa_ZALVYYfWIkpjoZrdx0lt57Y0Gw'; 
    let player;
    let timer;

    window.onload = function() {
        searchMusic("Top Bollywood Punjabi Songs 2024");
    };

    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-player', {
            height: '0', width: '0',
            events: { 'onStateChange': onPlayerStateChange }
        });
    }

    async function searchMusic(customQuery = null) {
        const query = customQuery || document.getElementById('query').value;
        const div = document.getElementById('results');
        div.innerHTML = '<p style="text-align:center;">Loading Hits...</p>';
        
        try {
            const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=15&q=${encodeURIComponent(query)}&type=video&key=${API_KEY}`);
            const data = await res.json();
            div.innerHTML = '';
            data.items.forEach(item => {
                div.innerHTML += `
                    <div class="music-card">
                        <div class="play-list-btn" onclick="playSong('${item.id.videoId}', '${item.snippet.title.replace(/'/g, "")}')">â–¶</div>
                        <div class="info">
                            <span class="song-name">${item.snippet.title}</span>
                        </div>
                    </div>`;
            });
        } catch(e) { div.innerHTML = '<p>Search Error!</p>'; }
    }

    function playSong(id, title) {
        player.loadVideoById(id);
        document.getElementById('current-song-title').innerText = title;
        document.getElementById('player-ui').style.display = 'block';
        document.getElementById('play-toggle').innerText = 'II';
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            startTimer();
        } else {
            clearInterval(timer);
        }
    }

    function startTimer() {
        clearInterval(timer);
        timer = setInterval(() => {
            const curr = player.getCurrentTime();
            const dur = player.getDuration();
            document.getElementById('seekbar').max = dur;
            document.getElementById('seekbar').value = curr;
            document.getElementById('current-time').innerText = formatTime(curr);
            document.getElementById('duration').innerText = formatTime(dur);
        }, 1000);
    }

    function formatTime(time) {
        const min = Math.floor(time / 60);
        const sec = Math.floor(time % 60);
        return min + ":" + (sec < 10 ? "0" + sec : sec);
    }

    function skip(seconds) {
        player.seekTo(player.getCurrentTime() + seconds, true);
    }

    function togglePlay() {
        const state = player.getPlayerState();
        if (state == 1) { 
            player.pauseVideo();
            document.getElementById('play-toggle').innerText = 'â–¶';
        } else { 
            player.playVideo();
            document.getElementById('play-toggle').innerText = 'II';
        }
    }

    // Seekbar control
    document.getElementById('seekbar').oninput = function() {
        player.seekTo(this.value, true);
    };

    function share(id) {
        const link = "https://youtu.be/" + id;
        if(navigator.share) navigator.share({url: link});
    }
</script>
</body>
</html>
